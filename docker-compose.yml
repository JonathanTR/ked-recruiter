version: '2'
services:
  db:
    image: mdillon/postgis
    container_name: db
  web:
    image: jtr1/ked-recruiter-api
    command: rails s -p 3000 -e production
    container_name: recruiter-web
    env_file: ./config/production.env
    depends_on:
      - db
    ports:
      - "3000:3000"
    volumes:
      - .:/app
  client:
    image: jtr1/ked-recruiter-client
    command: npm start
    container_name: recruiter-client
    depends_on:
      - web
    volumes:
      - ./client:/usr/src/app
    ports:
      - "80:3000"